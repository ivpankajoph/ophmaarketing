I want you to generate a COMPLETE full-stack architecture using Node.js (Express) for backend and React for frontend.  
Important: I do NOT want any database now.  
Instead, create a plugin-based “storage layer” so later I can add MongoDB / MySQL / PostgreSQL easily.

==============================================
SYSTEM ARCHITECTURE REQUIREMENTS
==============================================

# 1 — BACKEND (NODE.JS + EXPRESS)
Create a backend with a clean production-grade file structure:

backend/
  src/
    controllers/
    services/
    routes/
    utils/
    middleware/
    storage/        ← storage abstraction layer
    config/
  data/             ← temporary JSON storage
  server.js
  app.js

The backend must include the following modules:

----------------------------------------------
A) WhatsApp Business API Module
----------------------------------------------
Endpoints:
• GET /webhook/whatsapp → for WhatsApp verification (hub.challenge)
• POST /webhook/whatsapp → receive messages from WhatsApp

Logic:
1. Parse incoming message
2. Detect sender
3. Detect mapped form → agent
4. Call OpenAI agent using prompt
5. Respond to the sender on WhatsApp automatically

Outgoing API:
POST https://graph.facebook.com/v21.0/${PHONE_NUMBER_ID}/messages

----------------------------------------------
B) Facebook Lead Ads Module
----------------------------------------------
Endpoints:
• POST /facebook/syncForms
• GET  /facebook/forms
• POST /facebook/syncLeads
• GET  /facebook/leads

Use temporary JSON storage for:
forms.json
leads.json

Later I will replace storage with database.

----------------------------------------------
C) AI Agents Module
----------------------------------------------
Endpoints:
• POST /agents      → create agent (id, name, model, prompt)
• GET  /agents      → list agents
• DELETE /agents/:id

Store temporarily in agents.json.

----------------------------------------------
D) Agent–Form Mapping Module
----------------------------------------------
Endpoints:
• POST /map-agent
• GET  /map-agent

Store in mapping.json:
{
  "FB_FORM_ID": "agent_id"
}

----------------------------------------------
E) OpenAI API Module
----------------------------------------------
Service file:
utils/openai.js

Function:
sendToOpenAI(model, systemPrompt, userMessage)

----------------------------------------------
F) Storage Abstraction Layer
----------------------------------------------
Create storage interface:

storage/
  index.js (auto-selects json or future db)
  jsonAdapter.js
  mongoAdapter.js (empty placeholder)
  sqlAdapter.js (empty placeholder)

All controllers must call Storage instead of direct JSON files.

----------------------------------------------
G) Config
----------------------------------------------
Use .env for:

WHATSAPP_TOKEN=
PHONE_NUMBER_ID=
VERIFY_TOKEN=

FB_ACCESS_TOKEN=
FB_PAGE_ID=
FB_APP_ID=
FB_APP_SECRET=

OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1

----------------------------------------------
H) Documentation
----------------------------------------------
Generate README.md:
• how to run backend
• folder structure
• how to add database later
• how to deploy to any server
• how to set webhook with ngrok

==============================================
# 2 — FRONTEND (REACT)
==============================================

Create a React dashboard with this folder structure:

frontend/
  src/
    pages/
      Dashboard.jsx
      LeadForms.jsx
      Leads.jsx
      Agents.jsx
      MapAgent.jsx
      WhatsAppInbox.jsx
    components/
      Sidebar.jsx
      Topbar.jsx
      Table.jsx
      FormCard.jsx
    services/
      api.js (axios instance)
    App.js
    index.js

----------------------------------------------
Pages must include:

1. Dashboard  
   - Show totals (forms, leads, agents, messages)

2. Lead Forms  
   - List forms from backend
   - Button: Sync Forms

3. Leads  
   - List fb leads
   - Button: Sync Leads

4. Agents  
   - Add agent (form)
   - Edit/delete
   - Test agent chat window (live)

5. Map Agent  
   - Select FB form → assign agent

6. WhatsApp Inbox  
   - Shows live message logs from backend data folder

----------------------------------------------
Styling:
Use TailwindCSS.

Router:
Use React Router v6.

HTTP Client:
Axios.

==============================================
# 3 — OUTPUT REQUIREMENTS
==============================================

You must generate:

✔ Complete Node.js backend code  
✔ Complete React frontend code  
✔ All folder structures  
✔ All controllers & routes  
✔ All utilities  
✔ All placeholder adapters  
✔ JSON storage system  
✔ .env template  
✔ Full instructions  
✔ Example CURL commands for testing  
✔ How to deploy  
✔ How to run locally  

==============================================
NOW BUILD THE FULL SYSTEM.
==============================================
